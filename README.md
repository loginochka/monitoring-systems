# "Системы мониторинга"

1. Вас пригласили настроить мониторинг на проект. На онбординге вам рассказали, что проект представляет из себя 
платформу для вычислений с выдачей текстовых отчетов, которые сохраняются на диск. Взаимодействие с платформой 
осуществляется по протоколу http. Также вам отметили, что вычисления загружают ЦПУ. Какой минимальный набор метрик вы
выведите в мониторинг и почему?

2. Менеджер продукта посмотрев на ваши метрики сказал, что ему непонятно что такое RAM/inodes/CPUla. Также он сказал, 
что хочет понимать, насколько мы выполняем свои обязанности перед клиентами и какое качество обслуживания. Что вы 
можете ему предложить?

3. Вашей DevOps команде в этом году не выделили финансирование на построение системы сбора логов. Разработчики в свою 
очередь хотят видеть все ошибки, которые выдают их приложения. Какое решение вы можете предпринять в этой ситуации, 
чтобы разработчики получали ошибки приложения?

4. Вы, как опытный SRE, сделали мониторинг, куда вывели отображения выполнения SLA=99% по http кодам ответов. 
Вычисляете этот параметр по следующей формуле: summ_2xx_requests/summ_all_requests. Данный параметр не поднимается выше 
70%, но при этом в вашей системе нет кодов ответа 5xx и 4xx. Где у вас ошибка?

5. Опишите основные плюсы и минусы pull и push систем мониторинга.

6. Какие из ниже перечисленных систем относятся к push модели, а какие к pull? А может есть гибридные?

    - Prometheus 
    - TICK
    - Zabbix
    - VictoriaMetrics
    - Nagios

## Ответы на вопросы

1.
Количество запросов в секунду (RPS):

Позволит оценить текущую нагрузку на платформу и выявить любые аномалии в трафике.

Среднее время ответа (latency):

Позволяет оценить скорость ответа платформы на запросы клиентов. Высокая задержка может означать о проблемах производительности или инфраструктурных проблемах.

Коды статуса HTTP (например, 2xx, 4xx, 5xx):

Помогут идентифицировать ошибки и проблемы с доступностью сервиса для пользователей.

CPU utilization: 

Поможет понять, насколько интенсивно выполняются вычисления на платформе. Высокая загрузка CPU может указывать на необходимость масштабирования инфраструктуры или оптимизации вычислений.

Disk space utilization:

Позволяет контролировать доступное дисковое пространство и предотвращать проблемы из-за нехватки места.

Использование оперативной памяти (RAM): 

Позволяет отслеживать потребление памяти и идентифицировать утечки или неэффективное использование ресурсов.

2. 
Среднее время ответа (Average Response Time): 

Необходимое для ответа на запросы клиентов. Это покажет, насколько быстро платформа реагирует на запросы.

Аптайм (Uptime):

Процент времени, когда сервис доступен и работает корректно. Это ключевой показатель выполнения обязательств перед клиентами.

Процент ошибок (Error Rate): 

Процент запросов, завершающихся с ошибками (например, HTTP 4xx и 5xx). Высокий процент ошибок может свидетельствовать о проблемах с сервисом.

Частота различных кодов ошибок: 

Отдельный учет ошибок 4xx и 5xx поможет понять, где именно возникают проблемы.

Время выполнения запросов в рамках SLA:

Доля запросов, обработанных в соответствии с оговоренными в SLA параметрами (например, время ответа менее 200 мс). Это покажет, насколько сервис соответствует ожиданиям клиентов и выполнению договоренностей.

3.
Конфигурация логирования на уровне приложения: 

Настройка приложений на логирование ошибок в локальные файлы с использованием стандартных библиотек логирования Log4j, Logback, Python logging module.

Email уведомления: 

Настроить приложения на отправку уведомлений об ошибках на адрес электронной почты. Это можно сделать с помощью встроенных возможностей большинства фреймворков или сторонних библиотек.

Интеграция с мессенджерами:

Использование API популярных мессенджеров для отправки сообщений об ошибках в чат, где находятся разработчики.

4.
Таймауты и сетевые ошибки:

Запросы, которые не завершились корректно, например, из-за таймаута или проблем с сетью, также могут влиять на общее количество запросов, не попадая при этом в 4xx или 5xx категории.

Коды 3xx:

Эти коды указывают на перенаправление.

5. 
Pull система мониторинга

**Плюсы:**

Контроль за сбором данных:

Центральная система мониторинга контролирует, когда и откуда забирать данные.
Это позволяет избежать перегрузки агентов, так как опрос происходит по расписанию.

Упрощенное управление безопасностью:

Можно ограничить доступ к метрикам, настроив безопасные каналы для запросов (например, с использованием TLS).
Позволяет централизованно управлять аутентификацией и авторизацией.

Автономность агентов:

Агенты не должны быть настроены на отправку данных, что упрощает их конфигурацию и уменьшает нагрузку на них.

Легкость масштабирования:

Добавление новых агентов не требует изменений в центральной системе, достаточно просто добавить их в список опрашиваемых.

**Минусы:**

Сложность конфигурации сети:

Система мониторинга должна иметь доступ ко всем узлам, что может быть сложным в сетях с ограниченным доступом (например, за NAT или firewall).

Зависимость от доступности агентов:

Если агент недоступен во время опроса, данные будут потеряны до следующего опроса.

Тяжелая нагрузка на центральную систему:

В крупных системах центральный сервер может быть перегружен из-за большого количества опросов.

**Push система мониторинга**

**Плюсы:**

Гибкость агентов:

Агенты сами отправляют данные, когда это необходимо, что позволяет гибко настраивать частоту и объем отправляемых данных.

Меньшая нагрузка на центральную систему:

Центральная система просто принимает данные, что снижает нагрузку по сравнению с постоянным опросом.

Легкость работы с динамическими окружениями:

Упрощает мониторинг систем с динамически изменяющимся количеством узлов (например, в облачных средах).

**Минусы:**

Сложность управления агентами:

Необходимость настраивать агентов на отправку данных в центральную систему.
Требуется обеспечение надежной доставки данных от агентов к центральной системе.

Проблемы с безопасностью:

Каждый агент должен иметь доступ к центральной системе, что может создать потенциальные уязвимости.
Требуется настроить безопасные каналы передачи данных (например, с использованием TLS).

Потенциальные проблемы с перегрузкой агентов:

Если агентов слишком много или они отправляют данные слишком часто, это может привести к перегрузке сети или центральной системы.

6.
Prometheus - pull

TICK - push

Zabbix - гибридная

VictoriaMetrics - гибридная

Nagios - pull

8. 

![Graph](https://github.com/loginochka/monitoring-systems/blob/main/media/Graph.png)

9.

![Metrics](https://github.com/loginochka/monitoring-systems/blob/main/media/metrics.png)

[LICENSE](https://github.com/loginochka/monitoring-systems/blob/main/LICENSE)
